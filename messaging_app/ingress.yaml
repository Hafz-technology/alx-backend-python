# ingress.yaml

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: django-messaging-app-ingress
  annotations:
    # Use the Nginx Ingress Controller (This is the default for minikube/most setups)
    kubernetes.io/ingress.class: "nginx"
    # Optional: If you need to increase body size for uploads (common in Django)
    # nginx.org/client-max-body-size: "10m"
spec:
  rules:
  # The host (domain name) the ingress should respond to. 
  # Use an empty host to match all incoming traffic (useful for local testing)
  - host: 
    http:
      paths:
      # Rule 1: Route traffic matching the /api/ path to the service
      - path: /api/
        pathType: Prefix
        backend:
          service:
            name: django-messaging-app-service
            # Use the port defined in your ClusterIP service (port: 80)
            port:
              number: 80
      # Rule 2: Route all other traffic (/) to the service
      - path: /
        pathType: Prefix
        backend:
          service:
            name: django-messaging-app-service
            port:
              number: 80



              